(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e){e.exports={a:[{name:"item1",price:10,weight:200},{name:"item2",price:100,weight:20},{name:"item3",price:30,weight:300},{name:"item4",price:40,weight:500},{name:"item5",price:200,weight:250},{name:"item6",price:120,weight:10},{name:"item7",price:130,weight:10},{name:"item8",price:20,weight:500},{name:"item9",price:10,weight:790},{name:"item10",price:4,weight:100},{name:"item11",price:5,weight:340},{name:"item12",price:240,weight:800},{name:"item13",price:123,weight:200},{name:"item14",price:245,weight:20},{name:"item15",price:230,weight:200},{name:"item16",price:110,weight:200},{name:"item17",price:45,weight:20}]}},27:function(e,t){},30:function(e,t,a){e.exports=a(53)},39:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){},49:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var c=a(29),r=a(1),n=a.n(r),i=a(24),o=a.n(i),l=a(8),u=a(14),m=a(28),s=a(4),p="home/products/GET_PRODUCTS",h="home/products/FETCH_PRODUCT_INITIATE",g="home/products/FETCH_PRODUCT_SUCCESS",d="home/products/FETCH_PRODUCT_FAILED",f={products:!1,users:null,error:null,success:!1};var b="home/cart/ADD_PRODUCT",y="home/cart/REMOVE_PRODUCT",k="home/cart/ADD_WISH_LIST",O={totalItems:0,totalPayableAmount:0,totalWeight:0,cartItems:[]};var w=[{name:"item24",price:19,weight:10},{name:"item16",price:245,weight:10},{name:"item20",price:67,weight:20},{name:"item17",price:230,weight:20},{name:"item14",price:240,weight:20},{name:"item19",price:45,weight:200},{name:"item18",price:110,weight:200},{name:"item13",price:5,weight:200},{name:"item23",price:17,weight:250},{name:"item21",price:88,weight:300},{name:"item11",price:10,weight:340},{name:"item22",price:10,weight:500},{name:"item15",price:123,weight:700},{name:"item12",price:4,weight:800}],v="home/package/PACK_PRODUCTS",C=250,j=function(e,t){return e.sort(function(e,a){return a[t]-e[t]})},E={packageItems:0,totalPrice:0,totalWeight:0,packageForDelivery:[]};var P=Object(u.c)({productReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(s.a)({},e);case h:return Object(s.a)({},e,{fetching:!0,error:!1,success:!1});case g:return Object(s.a)({},e,{fetching:!1,error:!1,success:!0,products:t.payload});case d:return Object(s.a)({},e,{fetching:!1,error:!0,success:!1});default:return e}},cartReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return console.log("ADD_PRODUCT of reducer",t.payload),Object(s.a)({},e,{cartItems:e.cartItems.concat(t.payload),totalItems:e.totalItems+1,totalPayableAmount:e.totalPayableAmount+t.payload.price,totalWeight:e.totalWeight+t.payload.weight});case y:console.log("REMOVE_PRODUCT of reducer");var a=e.cartItems.filter(function(e){return e.name!==t.payload.name}),c=a.length!==e.cartItems.length;return Object(s.a)({},e,{cartItems:a,totalItems:c&&e.totalItems-1,totalPayableAmount:c&&e.totalPayableAmount-t.payload.price,totalWeight:c&&e.totalWeight-t.payload.weight});case k:console.log("ADD_WISH_LIST of reducer");var r=0,n=0;return w.map(function(t){return n+=t.weight,r+=t.price,e.cartItems.push(t),t}),Object(s.a)({},e,{totalItems:e.totalItems+w.length,totalWeight:e.totalWeight+n,totalPayableAmount:e.totalPayableAmount+r});default:return e}},packageReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:var a=[],c=0,r=t.payload.cartItems,n=t.payload.cartTotalPayableAmount,i=t.payload.totalWeight,o=t.payload.itemsCount,l=Math.round(n/C),u=i/l,m=j(r,"weight");for(c=0;c<l;c++)a[c]={packageNumber:c,packageWeight:0,packagePrice:0,items:[]};return c=0,m.map(function(e){for(var t=0;t<l;t++){if(e.weight>u){a[t].items.push(e),a[t].packagePrice+=e.price,a[t].packageWeight+=e.weight;break}if(a[t].packageWeight+e.weight<u&&a[t].packagePrice+e.price<C){a[t].items.push(e),a[t].packagePrice+=e.price,a[t].packageWeight+=e.weight;break}if(l-1===t){a[l]={packageNumber:l,packageWeight:0,packagePrice:0,items:[]},a[l].items.push(e),a[l].packagePrice+=e.price,a[l].packageWeight+=e.weight,l+=1;break}}return e}),console.log("newPackage",a),e.totalPrice=n,e.totalWeight=i,e.packageItems=o,e.packageForDelivery=a,Object(s.a)({},e);default:return e}}}),I=a(5),x=a(6),W=a(9),R=a(7),D=a(10),T=(a(39),function(e){return e.cartReducer&&e.cartReducer.cartItems}),A=function(e){return e.cartReducer.totalPayableAmount&&e.cartReducer.totalPayableAmount},N=function(e){return e.cartReducer.totalWeight&&e.cartReducer.totalWeight},_=function(e){return e.cartReducer.totalItems&&e.cartReducer.totalItems},S=function(e){function t(){var e,a;Object(I.a)(this,t);for(var c=arguments.length,r=new Array(c),n=0;n<c;n++)r[n]=arguments[n];return(a=Object(W.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).state={isChecked:!1},a}return Object(D.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onCardClick,c=t.item;return n.a.createElement("div",{style:{justifyContent:"center",alignContent:"center",display:"flex",alignItems:"center"}},n.a.createElement("input",{type:"checkbox",value:c.name,onClick:function(){e.setState({isChecked:!e.state.isChecked},function(){a(Object(s.a)({item:c},e.state))})}}))}}]),t}(r.Component),U=(a(41),function(e){function t(){return Object(I.a)(this,t),Object(W.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,c=t.showCheckBox,r=void 0!==c&&c;return n.a.createElement("div",{style:{cursor:"pointer"}},a.length>0?a.map(function(t,a){return n.a.createElement("div",{key:a,className:"flex"},n.a.createElement("p",null," ",t.name," -- "),n.a.createElement("p",null," ",t.price," --"),n.a.createElement("p",null," ",t.weight),r&&n.a.createElement(S,Object.assign({item:t},e.props)))}):n.a.createElement("p",{className:"textCenter"},"List is empty"))}}]),t}(r.Component)),F=(a(43),function(e){function t(){return Object(I.a)(this,t),Object(W.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClick,a=e.text;return n.a.createElement("button",{className:"btn blue",onClick:function(){t()}},a)}}]),t}(r.Component)),H=Object(l.b)(function(e){return{cartItems:T(e),cartTotalPayableAmount:A(e),totalWeight:N(e),itemsCount:_(e)}},function(e){return{dispatch:e}})(function(e){var t=e.cartItems,a=e.totalWeight,c=e.cartTotalPayableAmount,r=e.dispatch,i=e.itemsCount;return n.a.createElement("div",{className:"rightPanel"},n.a.createElement("h2",{className:"textCenter"},"Cart"),n.a.createElement(U,{data:t}),n.a.createElement("h3",{className:"textCenter"},"Total price: ",c),n.a.createElement(F,{onClick:function(){r({type:v,payload:{cartItems:t,cartTotalPayableAmount:c,totalWeight:a,itemsCount:i}})},text:"proceed to Package"}),n.a.createElement("br",null),n.a.createElement(F,{onClick:function(){r({type:k})},text:"Load a Wish-list"}))}),L=(a(45),function(e){return e.productReducer.products}),M=Object(l.b)(function(e){return{data:L(e)}},function(e){return{dispatch:e}})(function(e){var t=e.data,a=e.dispatch;return n.a.createElement("div",{className:"leftPanel"},n.a.createElement("h2",{className:"textCenter"},"All products"),n.a.createElement(U,{data:t,showCheckBox:!0,onCardClick:function(e){a(e.isChecked?{type:b,payload:e.item}:{type:y,payload:e.item})}}))}),B=(a(47),function(e){return e.packageReducer&&e.packageReducer.packageForDelivery&&e.packageReducer.packageForDelivery}),J=(a(49),function(e){function t(){return Object(I.a)(this,t),Object(W.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this.props.data;return n.a.createElement("div",null,e&&e.map(function(e,t){return n.a.createElement("div",{key:t,style:{display:"flex",flexDirection:"column"}},n.a.createElement("h4",{className:"textCenter"},"Package: ",e.packageNumber+1),n.a.createElement("div",{className:"textCenter"},e.items&&e.items.map(function(e,t){return n.a.createElement("span",{key:t}," ",e.name," ")})),n.a.createElement("div",{className:"textCenter"},n.a.createElement("p",null,"Total weight: ",e.packageWeight&&e.packageWeight),n.a.createElement("p",null,"Total price: ",e.packagePrice&&e.packagePrice),n.a.createElement("p",null,"Courier Price: ",(a=e.packageWeight)>1e3&&a<5e3?20:a>500&&a<1e3?15:a>200&&a<500?10:a>0&&a<200?5:void 0)));var a}))}}]),t}(r.Component)),V=Object(l.b)(function(e){return{packageItems:B(e)}},function(e){return{dispatch:e}})(function(e){var t=e.packageItems;return n.a.createElement("div",{className:"rightPanel"},n.a.createElement("h2",{className:"textCenter"},"Packages"),n.a.createElement(J,{data:t}))}),G=function(e){function t(){return Object(I.a)(this,t),Object(W.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:p})}},{key:"render",value:function(){return n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(M,{data:this.props.data}),n.a.createElement(H,null),n.a.createElement(V,null))}}]),t}(r.Component),K=Object(l.b)(function(e){return{product:e,cartData:T(e)}},function(e){return{dispatch:e}})(G),q=a(18),z=a.n(q),Q=a(13),X=a(26),Y=z.a.mark($),Z=z.a.mark(ee);function $(){return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.c)(p,ee);case 2:case"end":return e.stop()}},Y,this)}function ee(){var e;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Q.b)({type:h});case 3:return t.next=5,Object(Q.a)(te);case 5:return e=t.sent,t.next=8,Object(Q.b)({type:g,payload:e});case 8:t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(0),console.log(t.t0),t.next=15,Object(Q.b)({type:d,error:t.t0});case 15:case"end":return t.stop()}},Z,this,[[0,10]])}var te=function(){return X.a},ae=[$,a(27).fetchCartWatcherSaga],ce=Object(m.a)(),re=Object(u.d)(P,Object(u.a)(ce));ce.run.apply(ce,Object(c.a)(ae)),re.subscribe(function(){console.log("updated store",re.getState())}),o.a.render(n.a.createElement(l.a,{store:re},n.a.createElement(K,null)),document.getElementById("root"))}},[[30,2,1]]]);
//# sourceMappingURL=main.96ddc148.chunk.js.map